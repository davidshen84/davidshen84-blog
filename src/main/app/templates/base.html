<?xml version="1.0" encoding="utf-8"?>
<!doctype html>
<html lang="en">
  <head>
    <base href="{{refbase}}" />
    {% block title %}{% endblock %}
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-35014753-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
    <script src="static/js/underscore.js"></script>
    <script type="text/javascript">
      // bootstrap for underscore.js
      _.templateSettings = {
        interpolate: /\{\{(.+?)\}\}/g,
        evaluate: /\{\%(.+?)\%\}/g
      };
    </script>
    <script type="text/javascript" src="static/js/backbone.js"></script>
    {# <link href="static/css/bootstrap-responsive.css" type="text/css" rel="stylesheet" /> #}
    {# <link href="http://kevinburke.bitbucket.org/markdowncss/markdown.css" rel="stylesheet"></link> #}
  </head>
  <body>
  <div id="fb-root"></div>
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          {#
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          #}
          <a class="brand">My Blog</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="/blog/">Blog</a></li>
              <!--<li><a href="#contact">Contact</a></li>-->
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
    <div class="container">
      <header class="hero-unit">
        <h1 id="title" keyname="{{ title }}">{{ title|title }}</h1>
      </header>
      <div class="row">
        <aside class="span2">
          <iframe src="http://rcm.amazon.com/e/cm?t=david0a-20&o=1&p=11&l=ez&f=ifr&f=ifr" width="120" height="600" scrolling="no" marginwidth="0" marginheight="0" border="0" frameborder="0" style="border:none;"></iframe>
        </aside>
        <div class="span7">
          <nav id="breadcrumbs">
          {% block nav %}{% endblock %}
          </nav>
          {% block article %}{% endblock %}
          <hr />
          <div class="row">
            <div class="span2">
              <a href="https://twitter.com/share" class="twitter-share-button" data-via="davidshen84" data-hashtags="blog">Tweet</a>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </div>
            <div class="span2">
              <div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true" data-font="verdana"></div>
            </div>
            <div class="span2">
              <!-- Place this tag where you want the +1 button to render. -->
              <div class="g-plusone" data-size="small"></div>

              <!-- Place this tag after the last +1 button tag. -->
              <script type="text/javascript">
                (function() {
                  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                  po.src = 'https://apis.google.com/js/plusone.js';
                  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                })();
              </script>
            </div>
          </div>
          <div class="row">
            <div class="span7">
            {% block comments %}{% endblock %}
            </div>
          </div>
          <div class="row" id="addcommentform" style="{{ 'display: none' if not article else '' }}" >
            <div class="span7">
              <h3>Please add your comments</h3>
              <form action="" class="well form-horizontal">
                <fieldset>
                  <div class="control-group">
                    <label class="control-label" for="screenname">Name*</label>
                    <div class="controls">
                      <input type="text" class="input-xlarge" id="screenname" name="screenname" placeholder="screen name"/>
                    </div>
                  </div>
                  <div class="control-group">
                    <label class="control-label" for="emailaddr">Email*</label>
                    <div class="controls">
                      <input type="text" class="input-xlarge" id="email" name="email" placeholder="email...it will NOT appear publicly" />
                    </div>
                  </div>
                  <div class="control-group">
                    <label class="control-label" for="comment">Comments*</label>
                    <div class="controls">
                      <textarea class="input-xlarge" id="comment" name="comment" placeholder="please input your comments here..."></textarea>
                    </div>
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn btn-primary submit">Submit</button>
                    <button type="button" class="btn btn-danger clear">Clear</button>
                  </div>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
        <aside class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Archives</li>
              {% for y, mo in archives.iteritems() %}
                <li class="nav-header">{{ y }}</li>
                {% for m, t in mo.iteritems() %}
                  <li><a href='/blog/{{ y }}/{{ m }}'>{{ monthFullName[m-1] }} ({{ t|length }})</a></li>
                {% endfor %}
              {% endfor %}
            </ul>
          </div>
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                  <li class="nav-header">Tags</li>
                  {% for t, titles in tags.iteritems() %}
                    <li><a href="/blog/tag/{{ t }}">{{ t }} ({{ titles|length }})</a></li>
                  {% endfor %}
                </ul>
            </div> 
        </aside>
      </div>
      <footer>
        <hr />
        <a href="#contact"></a>
        <address>E-Mail: <a href="mailto:">davidshen84 at gmail dot com</a></address>
      </footer>
    </div>
    <link href="static/bootstrap/css/bootstrap.css" type="text/css" rel="stylesheet" />
    <script src="static/bootstrap/js/bootstrap.js"></script>
    <script src="static/js/less.js"></script>

    {% block scripts %}{% endblock %}
  </body>
</html>
