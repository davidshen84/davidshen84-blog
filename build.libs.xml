<project xmlns:ivy="antlib:org.apache.ivy.ant" name="build lib" default="build" basedir=".">
  <description>
    Build libraries
  </description>

  <property file="build.properties"/>

  <target name="init"
          description="initialize variables">
    <!-- get werkzeug package directory -->
    <exec executable="python" outputproperty="werkzeug">
      <arg value="-c"/>
      <arg value="import werkzeug; print '/'.join(werkzeug.__file__.split('/')[0:-2])"/>
    </exec>

    <!-- get flask package directory -->
    <exec executable="python" outputproperty="flask">
      <arg value="-c"/>
      <arg value="import flask; print '/'.join(flask.__file__.split('/')[0:-2])"/>
    </exec>

    <!-- get itsdangerous package directory -->
    <exec executable="python" outputproperty="itsdangerous">
      <arg value="-c"/>
      <arg value="import itsdangerous; print itsdangerous.__file__[0:-1]"/>
    </exec>
  </target>

  <target name="build" depends="init"
          description="build libraries">

    <zip destfile="lib/werkzeug.zip"
      basedir="${werkzeug}"
      includes="werkzeug/"
      excludes="**/testsuite/**, **/debug/**, **/*.pyc, **/*.pyo"/>
    <zip destfile="lib/flask.zip"
      basedir="${flask}"
      includes="flask/"
      excludes="**/testsuite/**, **/debug/**, **/*.pyc, **/*.pyo"/>

    <copy file="${itsdangerous}"
          tofile="lib/itsdangerous.py"/>
  </target>
</project>
















